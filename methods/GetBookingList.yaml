---
post:
  operationId: get_booking_list
  description: |-
    Returns a list of bookings/reservations which have not been previously
    downloaded or have been modified.

    The pull interval can be freely set. For channels that do not support the
    `CreateBooking` callback the interval is usually set to pull bookings every
    5 minutes. If `CreateBooking` is supported then the `GetBookingList` will
    be used as a fallback every 30 minutes.

    The OTA can also send myallocator a `NotifyBooking` callback to inform about
    new bookings available to be polled.
  requestBody:
    content:
      application/json:
        examples:
          $ref: ../examples/methods/GetBookingList.yaml#/rq
        schema:
          allOf:
            - $ref: ../schemas.yaml#/auth
            - type: object
              properties:
                verb:
                  type: string
                  enum:
                    - GetBookingList
                ota_booking_version:
                  type: string
                  nullable: true
                  description: |-
                    With each request we send along `ota_booking_version`, which
                    has the format `YYYY-MM-DD HH:MM:SS` and indicates the time
                    in UTC we last successfully requested bookings. It can be
                    `null` if no successful response has been received so
                    far. Please use `ota_booking_version` to only return to us
                    new or modified bookings made since then. To ensure that no
                    booking are skipped due to a time-offset between your and
                    our servers make sure to always reduce 5 or more minutes
                    from the time given. Example: we provide 2017-06-22
                    12:09:19, then please return all new/modified/cancalled
                    bookings since 2017-06-22 12:04:19 (5 minutes before the
                    time sent).

                    If `ota_booking_version` is `null` please return all bookings.
          required:
            - verb
            - ota_booking_version
    required: true
  responses:
    "200":
      content:
        application/json:
          examples:
            $ref: ../examples/methods/GetBookingList.yaml#/rs
          schema:
            oneOf:
              - type: object
                title: Successful booking list retrieval
                properties:
                  success: { type: boolean, enum: [ true ] }
                  Bookings:
                    type: array
                    description: >
                      List of bookings to be retrieved with `GetBookingId`.
                    items:
                      type: object
                      properties:
                        booking_id:
                          type: string
                          description: Unique booking ID on the OTA. Maximum of 64 characters.
                        version:
                          type: string
                          description: >
                            Most recent version number of the booking, if the
                            OTA wants to support retrieval of different versions
                            of bookings. Not commonly implemented.
                      required:
                        - booking_id
                required:
                  - success
                  - Bookings
              - $ref: ../schemas.d/response_error.yaml
      description: GetBookingList
  summary: GetBookingList
